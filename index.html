<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blend of Skies</title>
    <link rel="stylesheet" href="navbar.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            overflow-x: hidden;
            color: #333;
            background: #f5f8fc;
            position: relative;
        }
        
        .interactive-landscape {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 65%;
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
            transition: background 1.5s ease;
        }
        
        .sun {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle, #fffc00 20%, #ff9500);
            box-shadow: 0 0 40px rgba(255, 165, 0, 0.6);
            top: 15%;
            left: 15%;
            cursor: pointer;
            transition: all 0.5s ease;
            z-index: 1;
        }
        
        .sun:hover {
            transform: scale(1.1);
            box-shadow: 0 0 60px rgba(255, 165, 0, 0.8);
        }
        
        .moon {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, #f5f5f5, #d0d0d0);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
            top: 15%;
            right: 15%;
            opacity: 0;
            cursor: pointer;
            transition: all 0.5s ease;
            z-index: 1;
        }
        
        .moon:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
        }
        
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            filter: blur(5px);
            opacity: 0.9;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .cloud:hover {
            filter: blur(3px);
            transform: translateY(-5px);
        }
        
        .cloud:before,
        .cloud:after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 3px white;
            opacity: 0;
            transition: opacity 1.5s ease;
        }
        
        .rainbow {
            position: absolute;
            left: 20%;
            bottom: 35%;
            width: 400px;
            height: 200px;
            border-radius: 200px 200px 0 0;
            background: linear-gradient(
                to bottom,
                rgba(255, 0, 0, 0.5),
                rgba(255, 165, 0, 0.5),
                rgba(255, 255, 0, 0.5),
                rgba(0, 128, 0, 0.5),
                rgba(0, 0, 255, 0.5),
                rgba(75, 0, 130, 0.5),
                rgba(238, 130, 238, 0.5)
            );
            transform: rotate(180deg);
            opacity: 0;
            transition: opacity 1.5s ease;
            pointer-events: none;
            z-index: 1;
        }
        
        .hill {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 35%;
            background: #4b7f52;
            border-radius: 50% 50% 0 0;
            transition: background-color 1.5s ease;
            z-index: 3;
        }
        
        .hill.back {
            bottom: 10%;
            left: -20%;
            width: 80%;
            height: 40%;
            background: #3a6641;
            z-index: 2;
        }
        
        .hill.distant {
            bottom: 15%;
            left: 40%;
            width: 90%;
            height: 30%;
            background: #2c5234;
            z-index: 1;
        }
        
        .tree {
            position: absolute;
            cursor: pointer;
            z-index: 4;
            transition: transform 0.3s ease;
        }
        
        .tree:hover {
            transform: scale(1.05);
        }
        
        .tree-trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 70px;
            background: #5d4037;
            border-radius: 2px;
        }
        
        .tree-top {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 120px;
            background: #4CAF50;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transition: background-color 1.5s ease;
        }
        
        .raindrop {
            position: absolute;
            width: 2px;
            height: 15px;
            background: rgba(255, 255, 255, 0.6);
            pointer-events: none;
        }
        
        .snowflake {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
        }
        
        .lightning {
            position: absolute;
            background: white;
            filter: blur(1px);
            box-shadow: 0 0 20px white, 0 0 40px white;
            opacity: 0;
            pointer-events: none;
            z-index: 5;
        }
        
        .sky-questionnaire {
            max-width: 800px;
            margin: 30px auto;
            position: relative;
            z-index: 10;
        }
        
        .sky-card {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .sky-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .sky-header {
            position: relative;
            height: 120px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            color: white;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .sky-header h3 {
            font-size: 1.4rem;
            margin: 0 0 5px 0;
            z-index: 2;
        }
        
        .sky-header p {
            font-size: 0.9rem;
            margin: 0;
            opacity: 0.9;
            z-index: 2;
        }
        
        .header-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2.5rem;
            z-index: 2;
        }
        
        .sky-options {
            background: white;
            padding: 20px;
        }
        
        .option-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f7f9fc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
        }
        
        .option-item:last-child {
            margin-bottom: 0;
        }
        
        .option-item:hover {
            background: #edf5ff;
            transform: translateX(5px);
        }
        
        .option-item.selected {
            background: #e6f2ff;
            border-left-color: #1E90FF;
            font-weight: 500;
        }
        
        .option-item.selected::after {
            content: "‚úì";
            margin-left: auto;
            color: #1E90FF;
            font-weight: bold;
        }
        
        .completion-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.5s ease;
            display: none;
            position: relative;
            z-index: 10;
        }
        
        .completion-panel.active {
            opacity: 1;
            transform: scale(1);
            display: block;
        }
        
        .completion-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: inline-block;
            animation: pulse 3s infinite;
        }
        
        .progress-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border-radius: 30px;
            padding: 15px 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            z-index: 100;
        }
        
        .progress-text {
            margin-right: 15px;
            font-weight: 500;
        }
        
        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #edf5ff;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #1E90FF, #87CEEB);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .complete-button {
            padding: 8px 20px;
            background: linear-gradient(135deg, #1E90FF, #87CEEB);
            color: white;
            border: none;
            border-radius: 20px;
            margin-left: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            display: none;
        }
        
        .complete-button.active {
            display: block;
        }
        
        .complete-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(135, 206, 250, 0.3);
        }
        
        .content-area {
            padding: 30px 20px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        
        .tooltip.visible {
            opacity: 1;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.3; }
        }
        
        @keyframes rain {
            0% { transform: translateY(-10vh) rotate(15deg); }
            100% { transform: translateY(110vh) rotate(15deg); }
        }
        
        @keyframes snow {
            0% { transform: translateY(-10vh) rotate(0deg); }
            100% { transform: translateY(110vh) rotate(360deg); }
        }
        
        @keyframes lightning-flash {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        
        @media (max-width: 600px) {
            .sky-card {
                margin: 20px 10px;
            }
            
            .sky-header {
                height: 100px;
            }
            
            .option-item {
                padding: 12px;
            }
            
            .progress-container {
                padding: 10px 15px;
            }
            
            .progress-text {
                font-size: 0.9rem;
            }
            
            .complete-button {
                padding: 6px 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <nav class="cosmic-navbar">
        <div class="brand-container">
            <div class="brand-icon">
                <div class="orbit-icon">
                    <div class="planet"></div>
                    <div class="satellite"></div>
                </div>
            </div>
            <div class="brand-name">Blend of Skies</div>
        </div>
        
        <div class="sky-selector">
            <div class="selector-orb">
                <div class="orb-inner">
                    <span>Choose</span>
                    <span>Your</span>
                    <span>Sky</span>
                </div>
                <div class="orb-emoji">üå§Ô∏è</div>
            </div>
        </div>
    </nav>
    
    <div class="interactive-landscape" id="interactive-landscape">
        <div class="sky" id="sky"></div>
        <div class="sun" id="sun"></div>
        <div class="moon" id="moon"></div>
        <div class="rainbow" id="rainbow"></div>
        <div class="hill distant" id="hill-distant"></div>
        <div class="hill back" id="hill-back"></div>
        <div class="hill" id="hill-front"></div>
        <!-- Trees and other elements will be added dynamically -->
    </div>
    
    <div class="tooltip" id="tooltip"></div>
    
    <div class="content-area">
        <h2>Welcome to Blend of Skies</h2>
        <p>Interact with the landscape while answering questions to create your unique sky experience.</p>
        
        <div class="sky-questionnaire" id="skyQuestionnaire">
            <!-- Mood Card -->
            <div class="sky-card" data-question="mood">
                <div class="sky-header sunny-sky">
                    <div class="header-content">
                        <h3>Pick a mood</h3>
                        <p>Because "fine" isn't telling us anything.</p>
                    </div>
                    <div class="header-icon">‚òÄÔ∏è</div>
                </div>
                <div class="sky-options">
                    <div class="option-item" data-value="calm" data-sky-effect="clear">Calm and steady ‚Äî nothing phases you, not even Mondays</div>
                    <div class="option-item" data-value="focused" data-sky-effect="bright">Focused and fast ‚Äî your calendar needs a nap</div>
                    <div class="option-item" data-value="floating" data-sky-effect="cloudy">Floating through ‚Äî mentally present-ish</div>
                    <div class="option-item" data-value="low" data-sky-effect="overcast">Low energy ‚Äî battery's in power-saving mode</div>
                    <div class="option-item" data-value="irritated" data-sky-effect="stormy">Mildly irritated ‚Äî not angry, just extremely done</div>
                </div>
            </div>
            
            <!-- Shirt Style Card -->
            <div class="sky-card" data-question="shirtstyle">
                <div class="sky-header cloudy-sky">
                    <div class="header-content">
                        <h3>Pick a shirt style</h3>
                        <p>A.K.A. what you'll actually wear outside.</p>
                    </div>
                    <div class="header-icon">‚õÖ</div>
                </div>
                <div class="sky-options">
                    <div class="option-item" data-value="minimal" data-sky-effect="sunset">Minimal ‚Äî clean, simple, nothing fighting for attention</div>
                    <div class="option-item" data-value="graphic" data-sky-effect="rainbow">Big graphic ‚Äî your shirt speaks louder than you</div>
                    <div class="option-item" data-value="text" data-sky-effect="windy">Text/logo ‚Äî words, slogans, branding front and center</div>
                    <div class="option-item" data-value="depends" data-sky-effect="changing">Honestly? Depends ‚Äî your closet is a wildcard</div>
                </div>
            </div>
            
            <!-- Body Type Card -->
            <div class="sky-card" data-question="bodytype">
                <div class="sky-header stormy-sky">
                    <div class="header-content">
                        <h3>Pick a body type</h3>
                        <p>So we don't show you shirts made for someone else's torso.</p>
                    </div>
                    <div class="header-icon">‚õàÔ∏è</div>
                </div>
                <div class="sky-options">
                    <div class="option-item" data-value="slim" data-sky-effect="breezy">Slim build ‚Äî lean, narrow frame</div>
                    <div class="option-item" data-value="average" data-sky-effect="balanced">Average build ‚Äî not too big, not too small</div>
                    <div class="option-item" data-value="broad" data-sky-effect="mountains">Broad or built ‚Äî wider up top, strength included</div>
                    <div class="option-item" data-value="fuller" data-sky-effect="lush">Fuller body ‚Äî more shape, more space to cover</div>
                    <div class="option-item" data-value="between" data-sky-effect="mixed">Somewhere in between ‚Äî let's not overthink it</div>
                </div>
            </div>
            
            <!-- Size Card -->
            <div class="sky-card" data-question="size">
                <div class="sky-header sunset-sky">
                    <div class="header-content">
                        <h3>Pick a size</h3>
                        <p>Because "shrinks in the wash" isn't a size.</p>
                    </div>
                    <div class="header-icon">üåÖ</div>
                </div>
                <div class="sky-options">
                    <div class="option-item" data-value="xs" data-sky-effect="dawn">XS or S ‚Äî small frame, big opinions</div>
                    <div class="option-item" data-value="m" data-sky-effect="midday">Medium ‚Äî classic middle-lane fit</div>
                    <div class="option-item" data-value="l" data-sky-effect="afternoon">L or XL ‚Äî roomy, but not lost</div>
                    <div class="option-item" data-value="xxl" data-sky-effect="evening">XXL or above ‚Äî more to style, more to love</div>
                    <div class="option-item" data-value="unknown" data-sky-effect="night">No clue ‚Äî shirt sizing is a mystery</div>
                </div>
            </div>
            
            <!-- Price Card -->
            <div class="sky-card" data-question="price">
                <div class="sky-header snow-sky">
                    <div class="header-content">
                        <h3>Pick your price vibe</h3>
                        <p>You know what you want. We're just asking nicely.</p>
                    </div>
                    <div class="header-icon">‚ùÑÔ∏è</div>
                </div>
                <div class="sky-options">
                    <div class="option-item" data-value="classic" data-sky-effect="snowy">Classic ‚Äî good quality, solid price, no drama</div>
                    <div class="option-item" data-value="premium" data-sky-effect="pristine">Premium ‚Äî feels nice, lasts long, costs a little more</div>
                </div>
            </div>
        </div>
        
        <div class="completion-panel" id="completionPanel">
            <span class="completion-icon">üåà</span>
            <h2>Your Sky Blend is Ready!</h2>
            <p>We've created your perfect atmosphere of style based on your selections.</p>
            <p>Get ready to see clothes that match your unique blend of preferences!</p>
        </div>
    </div>
    
    <div class="progress-container">
        <div class="progress-text">Your Sky: <span id="progressText">0/5</span></div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <button class="complete-button" id="completeButton">Complete</button>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Elements
        const landscape = document.getElementById('interactive-landscape');
        const sky = document.getElementById('sky');
        const sun = document.getElementById('sun');
        const moon = document.getElementById('moon');
        const rainbow = document.getElementById('rainbow');
        const hillFront = document.getElementById('hill-front');
        const hillBack = document.getElementById('hill-back');
        const hillDistant = document.getElementById('hill-distant');
        const tooltip = document.getElementById('tooltip');
        
        // Questionnaire elements
        const optionItems = document.querySelectorAll('.option-item');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const completeButton = document.getElementById('completeButton');
        const skyQuestionnaire = document.getElementById('skyQuestionnaire');
        const completionPanel = document.getElementById('completionPanel');
        
        // State
        let answeredQuestions = 0;
        const totalQuestions = document.querySelectorAll('.sky-card').length;
        let currentSkyState = 'default';
        let clouds = [];
        let trees = [];
        let stars = [];
        let raindrops = [];
        let snowflakes = [];
        let lightnings = [];
        let isNight = false;
        let isRaining = false;
        let isSnowing = false;
        let isStormy = false;
        
        // Initialize
        initializeLandscape();
        
        // Sky effects definitions
        const skyEffects = {
            default: {
                sky: 'linear-gradient(to bottom, #87CEEB, #1E90FF)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '15%' } },
                moon: { visible: false },
                clouds: { amount: 3, opacity: 0.9 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            clear: {
                sky: 'linear-gradient(to bottom, #87CEEB, #1E90FF)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '15%' } },
                moon: { visible: false },
                clouds: { amount: 0, opacity: 0 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            bright: {
                sky: 'linear-gradient(to bottom, #66ccff, #1a75ff)',
                hills: ['#5d9b67', '#4d8256', '#3d6944'],
                treeTops: '#5db762',
                sun: { visible: true, position: { top: '10%', left: '50%' } },
                moon: { visible: false },
                clouds: { amount: 1, opacity: 0.7 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            cloudy: {
                sky: 'linear-gradient(to bottom, #a6ceed, #5d99c6)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '30%' } },
                moon: { visible: false },
                clouds: { amount: 8, opacity: 0.9 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            overcast: {
                sky: 'linear-gradient(to bottom, #95adc1, #657b8f)',
                hills: ['#3f6c44', '#2e5933', '#204627'],
                treeTops: '#3c8c40',
                sun: { visible: false },
                moon: { visible: false },
                clouds: { amount: 12, opacity: 1 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day',
                weather: { type: 'drizzle' }
            },
            stormy: {
                sky: 'linear-gradient(to bottom, #4e5d6c, #2c3e50)',
                hills: ['#355c39', '#274428', '#192e1b'],
                treeTops: '#355c39',
                sun: { visible: false },
                moon: { visible: false },
                clouds: { amount: 10, opacity: 1 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day',
                weather: { type: 'thunderstorm' }
            },
            sunset: {
                sky: 'linear-gradient(to bottom, #ff7e5f, #feb47b)',
                hills: ['#3b5f3f', '#2a472e', '#1d331f'],
                treeTops: '#355c39',
                sun: { visible: true, position: { top: '30%', left: '75%' } },
                moon: { visible: false },
                clouds: { amount: 4, opacity: 0.8 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'evening'
            },
            rainbow: {
                sky: 'linear-gradient(to bottom, #82addb, #6e94c0)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '20%', left: '30%' } },
                moon: { visible: false },
                clouds: { amount: 6, opacity: 0.7 },
                rainbow: { visible: true },
                stars: { visible: false },
                time: 'day',
                weather: { type: 'light-rain' }
            },
            windy: {
                sky: 'linear-gradient(to bottom, #88c3e4, #5a9bc8)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '20%' } },
                moon: { visible: false },
                clouds: { amount: 5, opacity: 0.8, moving: true },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            changing: {
                sky: 'linear-gradient(to bottom, #88c3e4, #5a9bc8)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '20%' } },
                moon: { visible: false },
                clouds: { amount: 5, opacity: 0.8 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day',
                changeFrequency: 8000
            },
            breezy: {
                sky: 'linear-gradient(to bottom, #add8e6, #5f9ea0)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '25%' } },
                moon: { visible: false },
                clouds: { amount: 3, opacity: 0.7, moving: true },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            balanced: {
                sky: 'linear-gradient(to bottom, #7fb3d5, #2980b9)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '18%', left: '30%' } },
                moon: { visible: false },
                clouds: { amount: 4, opacity: 0.8 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            mountains: {
                sky: 'linear-gradient(to bottom, #5d8aa8, #34568b)',
                hills: ['#5b9b64', '#4a8253', '#3c6a43'],
                treeTops: '#5cad61',
                sun: { visible: true, position: { top: '15%', left: '20%' } },
                moon: { visible: false },
                clouds: { amount: 2, opacity: 0.6 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            lush: {
                sky: 'linear-gradient(to bottom, #87ceeb, #4682b4)',
                hills: ['#5f9966', '#4d7e53', '#3a6240'],
                treeTops: '#63b669',
                sun: { visible: true, position: { top: '12%', left: '35%' } },
                moon: { visible: false },
                clouds: { amount: 3, opacity: 0.7 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            mixed: {
                sky: 'linear-gradient(to bottom, #93c6e0, #5a9bc8)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '15%', left: '25%' } },
                moon: { visible: false },
                clouds: { amount: 5, opacity: 0.7 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            dawn: {
                sky: 'linear-gradient(to bottom, #ff9e7a, #ff7d67)',
                hills: ['#3b5e3e', '#2a472e', '#1d331f'],
                treeTops: '#355c39',
                sun: { visible: true, position: { top: '30%', left: '15%' } },
                moon: { visible: false },
                clouds: { amount: 2, opacity: 0.6 },
                rainbow: { visible: false },
                stars: { visible: true },
                time: 'dawn'
            },
            midday: {
                sky: 'linear-gradient(to bottom, #1e90ff, #87ceeb)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '10%', left: '50%' } },
                moon: { visible: false },
                clouds: { amount: 2, opacity: 0.7 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            afternoon: {
                sky: 'linear-gradient(to bottom, #87ceeb, #1e90ff)',
                hills: ['#4b7f52', '#3a6641', '#2c5234'],
                treeTops: '#4CAF50',
                sun: { visible: true, position: { top: '20%', left: '60%' } },
                moon: { visible: false },
                clouds: { amount: 4, opacity: 0.8 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day'
            },
            evening: {
                sky: 'linear-gradient(to bottom, #fd7345, #de527e)',
                hills: ['#3b5e3e', '#2a472e', '#1d331f'],
                treeTops: '#355c39',
                sun: { visible: true, position: { top: '30%', left: '80%' } },
                moon: { visible: true, position: { top: '15%', right: '75%' } },
                clouds: { amount: 3, opacity: 0.7 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'evening'
            },
            night: {
                sky: 'linear-gradient(to bottom, #0c2642, #1a1e40)',
                hills: ['#294d2d', '#1d3720', '#152a18'],
                treeTops: '#294d2d',
                sun: { visible: false },
                moon: { visible: true, position: { top: '15%', right: '30%' } },
                clouds: { amount: 3, opacity: 0.5 },
                rainbow: { visible: false },
                stars: { visible: true },
                time: 'night'
            },
            snowy: {
                sky: 'linear-gradient(to bottom, #c6d4e1, #8da9bf)',
                hills: ['#ffffff', '#f0f0f0', '#e0e0e0'],
                treeTops: '#4d8957',
                sun: { visible: false },
                moon: { visible: false },
                clouds: { amount: 7, opacity: 0.9 },
                rainbow: { visible: false },
                stars: { visible: false },
                time: 'day',
                weather: { type: 'snow' }
            },
            pristine: {
                sky: 'linear-gradient(to bottom, #b0e2ff, #87cefa)',
                hills: ['#5f9966', '#4d7e53', '#3a6240'],
                treeTops: '#63b669',
                sun: { visible: true, position: { top: '12%', left: '40%' } },
                moon: { visible: false },
                clouds: { amount: 2, opacity: 0.6 },
                rainbow: { visible: true },
                stars: { visible: false },
                time: 'day'
            }
        };
        
        // Initialize interactive landscape
        function initializeLandscape() {
            // Create trees
            createTrees();
            
            // Create stars
            createStars();
            
            // Set default sky state
            applySkyEffect('default');
            
            // Add event listeners for landscape elements
            addInteractiveEvents();
            
            // Setup hover tooltips
            setupTooltips();
        }
        
        // Create trees on the landscape
        function createTrees() {
            const treePositions = [
                { left: '10%', bottom: '5%', size: 1.2 },
                { left: '25%', bottom: '3%', size: 0.8 },
                { left: '40%', bottom: '7%', size: 1 },
                { left: '60%', bottom: '4%', size: 1.3 },
                { left: '80%', bottom: '6%', size: 0.9 }
            ];
            
            treePositions.forEach(pos => {
                const tree = document.createElement('div');
                tree.className = 'tree';
                tree.style.left = pos.left;
                tree.style.bottom = pos.bottom;
                tree.style.transform = `scale(${pos.size})`;
                
                const trunk = document.createElement('div');
                trunk.className = 'tree-trunk';
                
                const top = document.createElement('div');
                top.className = 'tree-top';
                
                tree.appendChild(trunk);
                tree.appendChild(top);
                landscape.appendChild(tree);
                
                trees.push(tree);
            });
        }
        
        // Create stars for night sky
        function createStars() {
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 40}%`;
                
                // Random size between 1px and 3px
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // Random twinkle animation
                star.style.animation = `twinkle ${Math.random() * 3 + 2}s infinite`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                
                landscape.appendChild(star);
                stars.push(star);
            }
        }
        
        // Create clouds
        function createClouds(amount, opacity) {
            // Remove existing clouds
            clouds.forEach(cloud => {
                if (cloud.parentNode) {
                    cloud.parentNode.removeChild(cloud);
                }
            });
            
            clouds = [];
            
            // Create new clouds
            for (let i = 0; i < amount; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                
                // Random size
                const size = Math.random() * 150 + 100;
                cloud.style.width = `${size}px`;
                cloud.style.height = `${size * 0.6}px`;
                
                // Random position
                cloud.style.left = `${Math.random() * 100}%`;
                cloud.style.top = `${Math.random() * 30}%`;
                cloud.style.opacity = '0';
                
                // Create cloud shape with pseudo elements
                cloud.style.boxShadow = '0 0 30px rgba(255, 255, 255, 0.3)';
                
                landscape.appendChild(cloud);
                clouds.push(cloud);
                
                // Fade in the cloud
                setTimeout(() => {
                    cloud.style.opacity = opacity.toString();
                }, i * 300);
            }
        }
        
        // Create raindrops
        function createRain() {
            if (isRaining) return;
            isRaining = true;
            
            const rainInterval = setInterval(() => {
                if (!isRaining) {
                    clearInterval(rainInterval);
                    return;
                }
                
                const raindrop = document.createElement('div');
                raindrop.className = 'raindrop';
                
                // Random position
                raindrop.style.left = `${Math.random() * 100}%`;
                raindrop.style.top = '0';
                
                // Add animation
                raindrop.style.animation = `rain ${Math.random() * 0.5 + 0.7}s linear`;
                
                landscape.appendChild(raindrop);
                raindrops.push(raindrop);
                
                // Remove raindrop after animation
                setTimeout(() => {
                    if (raindrop.parentNode) {
                        raindrop.parentNode.removeChild(raindrop);
                    }
                    
                    const index = raindrops.indexOf(raindrop);
                    if (index > -1) {
                        raindrops.splice(index, 1);
                    }
                }, 1500);
            }, 50);
        }
        
        // Create snowflakes
        function createSnow() {
            if (isSnowing) return;
            isSnowing = true;
            
            const snowInterval = setInterval(() => {
                if (!isSnowing) {
                    clearInterval(snowInterval);
                    return;
                }
                
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                
                // Random position
                snowflake.style.left = `${Math.random() * 100}%`;
                snowflake.style.top = '0';
                
                // Add animation
                snowflake.style.animation = `snow ${Math.random() * 5 + 5}s linear`;
                
                landscape.appendChild(snowflake);
                snowflakes.push(snowflake);
                
                // Remove snowflake after animation
                setTimeout(() => {
                    if (snowflake.parentNode) {
                        snowflake.parentNode.removeChild(snowflake);
                    }
                    
                    const index = snowflakes.indexOf(snowflake);
                    if (index > -1) {
                        snowflakes.splice(index, 1);
                    }
                }, 10000);
            }, 200);
        }
        
        // Create lightning effect
        function createLightning() {
            if (!isStormy) return;
            
            const lightning = document.createElement('div');
            lightning.className = 'lightning';
            
            // Random position
            const leftPos = Math.random() * 80 + 10;
            lightning.style.left = `${leftPos}%`;
            lightning.style.top = '0';
            
            // Random width and height
            const width = Math.random() * 5 + 2;
            const height = Math.random() * 200 + 100;
            lightning.style.width = `${width}px`;
            lightning.style.height = `${height}px`;
            
            // Random angle
            const angle = Math.random() * 20 - 10;
            lightning.style.transform = `rotate(${angle}deg)`;
            
            landscape.appendChild(lightning);
            lightnings.push(lightning);
            
            // Flash animation
            lightning.style.animation = 'lightning-flash 0.5s';
            
            // Remove lightning after animation
            setTimeout(() => {
                if (lightning.parentNode) {
                    lightning.parentNode.removeChild(lightning);
                }
                
                const index = lightnings.indexOf(lightning);
                if (index > -1) {
                    lightnings.splice(index, 1);
                }
            }, 500);
            
            // Schedule next lightning if still stormy
            if (isStormy) {
                setTimeout(() => {
                    if (isStormy && Math.random() > 0.3) {
                        createLightning();
                    }
                }, Math.random() * 5000 + 2000);
            }
        }
        
        // Apply sky effect based on selection
        function applySkyEffect(effectName) {
            const effect = skyEffects[effectName] || skyEffects.default;
            currentSkyState = effectName;
            
            // Sky background
            sky.style.background = effect.sky;
            
            // Hills
            hillFront.style.backgroundColor = effect.hills[0];
            hillBack.style.backgroundColor = effect.hills[1];
            hillDistant.style.backgroundColor = effect.hills[2];
            
            // Tree tops
            trees.forEach(tree => {
                const treeTop = tree.querySelector('.tree-top');
                treeTop.style.backgroundColor = effect.treeTops;
            });
            
            // Sun
            if (effect.sun.visible) {
                sun.style.opacity = '1';
                if (effect.sun.position) {
                    if (effect.sun.position.top) sun.style.top = effect.sun.position.top;
                    if (effect.sun.position.left) sun.style.left = effect.sun.position.left;
                }
            } else {
                sun.style.opacity = '0';
            }
            
            // Moon
            if (effect.moon.visible) {
                moon.style.opacity = '1';
                if (effect.moon.position) {
                    if (effect.moon.position.top) moon.style.top = effect.moon.position.top;
                    if (effect.moon.position.right) moon.style.right = effect.moon.position.right;
                }
            } else {
                moon.style.opacity = '0';
            }
            
            // Clouds
            createClouds(effect.clouds.amount, effect.clouds.opacity);
            
            // Add movement to clouds if specified
            if (effect.clouds.moving) {
                clouds.forEach(cloud => {
                    const speed = Math.random() * 50 + 30;
                    const direction = Math.random() > 0.5 ? 1 : -1;
                    cloud.setAttribute('data-speed', speed * direction);
                    
                    animateCloud(cloud);
                });
            }
            
            // Rainbow
            rainbow.style.opacity = effect.rainbow.visible ? '1' : '0';
            
            // Stars
            stars.forEach(star => {
                star.style.opacity = effect.stars.visible ? '0.8' : '0';
            });
            
            // Time of day
            isNight = effect.time === 'night';
            
            // Weather effects
            isRaining = false;
            isSnowing = false;
            isStormy = false;
            
            if (effect.weather) {
                if (effect.weather.type === 'rain' || effect.weather.type === 'light-rain' || effect.weather.type === 'drizzle') {
                    isRaining = true;
                    createRain();
                } else if (effect.weather.type === 'snow') {
                    isSnowing = true;
                    createSnow();
                } else if (effect.weather.type === 'thunderstorm') {
                    isRaining = true;
                    isStormy = true;
                    createRain();
                    createLightning();
                }
            }
            
            // Changing weather if specified
            if (effect.changeFrequency) {
                clearInterval(window.changeWeatherInterval);
                window.changeWeatherInterval = setInterval(() => {
                    const randomEffect = getRandomEffectName();
                    applySkyEffect(randomEffect);
                }, effect.changeFrequency);
            } else {
                clearInterval(window.changeWeatherInterval);
            }
        }
        
        // Animate cloud movement
        function animateCloud(cloud) {
            const speed = parseFloat(cloud.getAttribute('data-speed')) || 30;
            
            const cloudAnimation = () => {
                const currentLeft = parseFloat(cloud.style.left);
                let newLeft = currentLeft + (speed / 1000);
                
                if (newLeft > 120) newLeft = -20;
                if (newLeft < -20) newLeft = 120;
                
                cloud.style.left = `${newLeft}%`;
                
                if (clouds.includes(cloud)) {
                    requestAnimationFrame(cloudAnimation);
                }
            };
            
            requestAnimationFrame(cloudAnimation);
        }
        
        // Get a random effect name for changing weather
        function getRandomEffectName() {
            const effectNames = Object.keys(skyEffects);
            return effectNames[Math.floor(Math.random() * effectNames.length)];
        }
        
        // Add interactive events to landscape elements
        function addInteractiveEvents() {
            // Sun interaction
            sun.addEventListener('click', () => {
                if (currentSkyState === 'clear') {
                    applySkyEffect('rainbow');
                } else if (currentSkyState === 'rainbow') {
                    applySkyEffect('cloudy');
                } else {
                    applySkyEffect('clear');
                }
            });
            
            // Moon interaction
            moon.addEventListener('click', () => {
                if (isNight) {
                    applySkyEffect('dawn');
                } else {
                    applySkyEffect('night');
                }
            });
            
            // Tree interaction
            trees.forEach(tree => {
                tree.addEventListener('click', () => {
                    const treeTop = tree.querySelector('.tree-top');
                    const currentColor = treeTop.style.backgroundColor;
                    
                    if (currentColor === 'rgb(76, 175, 80)' || !currentColor) { // Default green
                        treeTop.style.backgroundColor = '#e57373'; // Red
                    } else if (currentColor === 'rgb(229, 115, 115)') { // Red
                        treeTop.style.backgroundColor = '#ffb74d'; // Orange
                    } else if (currentColor === 'rgb(255, 183, 77)') { // Orange
                        treeTop.style.backgroundColor = '#fff176'; // Yellow
                    } else if (currentColor === 'rgb(255, 241, 118)') { // Yellow
                        treeTop.style.backgroundColor = '#4CAF50'; // Back to green
                    }
                });
            });
            
            // Cloud interaction
            landscape.addEventListener('click', (e) => {
                if (e.target.classList.contains('cloud')) {
                    const cloud = e.target;
                    
                    // Increase size on click
                    const currentWidth = parseFloat(cloud.style.width);
                    const newWidth = currentWidth * 1.2;
                    cloud.style.width = `${newWidth}px`;
                    cloud.style.height = `${newWidth * 0.6}px`;
                    
                    // Chance of rain from cloud
                    if (Math.random() > 0.7 && !isRaining) {
                        isRaining = true;
                        createRain();
                        
                        // Stop rain after a while
                        setTimeout(() => {
                            isRaining = false;
                        }, 5000);
                    }
                }
            });
            
            // Sky interaction (add clouds on click)
            sky.addEventListener('click', (e) => {
                // Don't add clouds if clicking on an existing element
                if (e.target !== sky) return;
                
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                
                // Size based on mouse position (higher = smaller)
                const yPos = e.clientY / window.innerHeight;
                const size = 150 * (1 - yPos * 0.5);
                
                cloud.style.width = `${size}px`;
                cloud.style.height = `${size * 0.6}px`;
                
                // Position at click point
                cloud.style.left = `${(e.clientX / window.innerWidth) * 100}%`;
                cloud.style.top = `${(e.clientY / window.innerHeight) * 40}%`;
                cloud.style.opacity = '0';
                
                landscape.appendChild(cloud);
                clouds.push(cloud);
                
                // Fade in the cloud
                setTimeout(() => {
                    cloud.style.opacity = '0.8';
                }, 10);
                
                // Add drag functionality
                makeDraggable(cloud);
            });
            
            // Rainbow interaction
            rainbow.addEventListener('click', () => {
                rainbow.style.opacity = rainbow.style.opacity === '1' ? '0' : '1';
            });
        }
        
        // Make an element draggable
        function makeDraggable(element) {
            let isDragging = false;
            let offsetX, offsetY;
            
            const onMouseDown = (e) => {
                isDragging = true;
                
                const rect = element.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                
                element.style.zIndex = '10';
            };
            
            const onMouseMove = (e) => {
                if (!isDragging) return;
                
                const left = (e.clientX - offsetX) / window.innerWidth * 100;
                const top = (e.clientY - offsetY) / window.innerHeight * 100;
                
                element.style.left = `${left}%`;
                element.style.top = `${top}%`;
            };
            
            const onMouseUp = () => {
                isDragging = false;
                element.style.zIndex = '2';
            };
            
            element.addEventListener('mousedown', onMouseDown);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
            
            // Touch events for mobile
            element.addEventListener('touchstart', (e) => {
                const touch = e.touches[0];
                onMouseDown(touch);
            });
            
            document.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                onMouseMove(touch);
            });
            
            document.addEventListener('touchend', onMouseUp);
        }
        
        // Setup tooltips for interactive elements
        function setupTooltips() {
            const interactiveElements = [
                { element: sun, text: 'Click to change weather' },
                { element: moon, text: 'Click to toggle time of day' },
                ...trees.map(tree => ({ element: tree, text: 'Click to change seasons' }))
            ];
            
            interactiveElements.forEach(item => {
                item.element.addEventListener('mouseenter', (e) => {
                    tooltip.textContent = item.text;
                    tooltip.classList.add('visible');
                    
                    const rect = item.element.getBoundingClientRect();
                    tooltip.style.left = `${rect.left + rect.width / 2}px`;
                    tooltip.style.top = `${rect.top - 30}px`;
                    tooltip.style.transform = 'translateX(-50%)';
                });
                
                item.element.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('visible');
                });
            });
            
            // General tooltips
            sky.addEventListener('mouseenter', () => {
                tooltip.textContent = 'Click to add clouds';
                tooltip.classList.add('visible');
                tooltip.style.left = '50%';
                tooltip.style.top = '10%';
                tooltip.style.transform = 'translateX(-50%)';
            });
            
            sky.addEventListener('mouseleave', () => {
                tooltip.classList.remove('visible');
            });
        }
        
        // Handle option selection
        optionItems.forEach(option => {
            option.addEventListener('click', function() {
                const card = this.closest('.sky-card');
                const questionType = card.getAttribute('data-question');
                
                // Deselect other options in same card
                card.querySelectorAll('.option-item').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Select this option
                this.classList.add('selected');
                
                // Check if this is a new answer
                if (!card.classList.contains('answered')) {
                    card.classList.add('answered');
                    answeredQuestions++;
                    updateProgress();
                }
                
                // Apply sky effect if specified
                const skyEffect = this.getAttribute('data-sky-effect');
                if (skyEffect) {
                    applySkyEffect(skyEffect);
                }
                
                // Smooth scroll to next card if available
                const nextCard = card.nextElementSibling;
                if (nextCard && nextCard.classList.contains('sky-card')) {
                    setTimeout(() => {
                        nextCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                }
            });
        });
        
        // Update progress
        function updateProgress() {
            const progress = (answeredQuestions / totalQuestions) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${answeredQuestions}/${totalQuestions}`;
            
            if (answeredQuestions === totalQuestions) {
                completeButton.classList.add('active');
            }
        }
        
        // Complete button
        completeButton.addEventListener('click', function() {
            if (answeredQuestions === totalQuestions) {
                skyQuestionnaire.style.display = 'none';
                completionPanel.classList.add('active');
                this.closest('.progress-container').style.display = 'none';
                
                // Create a special celebration sky effect
                applyCelebrationSky();
            } else {
                alert('Please answer all questions before completing!');
            }
        });
        
        // Apply a special celebration sky effect
        function applyCelebrationSky() {
            // Colorful sky
            sky.style.background = 'linear-gradient(to bottom, #833ab4, #fd1d1d, #fcb045)';
            
            // Vibrant hills
            hillFront.style.backgroundColor = '#4CAF50';
            hillBack.style.backgroundColor = '#2196F3';
            hillDistant.style.backgroundColor = '#9C27B0';
            
            // Show both sun and moon
            sun.style.opacity = '1';
            sun.style.top = '15%';
            sun.style.left = '25%';
            
            moon.style.opacity = '1';
            moon.style.top = '15%';
            moon.style.right = '25%';
            
            // Show rainbow
            rainbow.style.opacity = '1';
            
            // Colorful trees
            trees.forEach((tree, index) => {
                const treeTop = tree.querySelector('.tree-top');
                const colors = ['#e57373', '#ffb74d', '#fff176', '#81c784', '#4fc3f7'];
                treeTop.style.backgroundColor = colors[index % colors.length];
                
                // Add floating animation
                tree.style.animation = `float ${Math.random() * 2 + 3}s infinite`;
            });
            
            // Create celebration clouds
            createClouds(10, 0.8);
            
            // Add some sparkling stars
            stars.forEach(star => {
                star.style.opacity = '0.8';
                star.style.animation = `twinkle ${Math.random() * 2 + 1}s infinite`;
            });
        }
    });
    </script>
</body>
</html>
